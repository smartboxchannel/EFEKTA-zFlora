const fz = require('zigbee-herdsman-converters/converters/fromZigbee');
const tz = require('zigbee-herdsman-converters/converters/toZigbee');
const exposes = require('zigbee-herdsman-converters/lib/exposes');
const reporting = require('zigbee-herdsman-converters/lib/reporting');
const extend = require('zigbee-herdsman-converters/lib/extend');
const e = exposes.presets;
const ea = exposes.access;

const tzLocal = {
    node_config: {
        key: ['read_sensors_delay'],
        convertSet: async (entity, key, rawValue, meta) => {
            const lookup = {'OFF': 0x00, 'ON': 0x01};
            const value = lookup.hasOwnProperty(rawValue) ? lookup[rawValue] : parseInt(rawValue, 10);
            const payloads = {
                read_sensors_delay: ['genPowerCfg', {0x0201: {value, type: 0x21}}],
            };
            await entity.write(payloads[key][0], payloads[key][1]);
            return {
                state: {[key]: rawValue},
            };
        },
    },
	node_debug: {
        key: ['lower_level', 'upper_level'],
        convertSet: async (entity, key, rawValue, meta) => {
            const lookup = {'OFF': 0x00, 'ON': 0x01};
            const value = lookup.hasOwnProperty(rawValue) ? lookup[rawValue] : parseInt(rawValue, 10);
            const payloads = {
                lower_level: ['msSoilMoisture', {0x0502: {value, type: 0x21}}],
				upper_level: ['msSoilMoisture', {0x0503: {value, type: 0x21}}],
            };
            await entity.write(payloads[key][0], payloads[key][1]);
            return {
                state: {[key]: rawValue},
            };
        },
    },
	temperaturef_config: {
        key: ['temperature_offset'],
        convertSet: async (entity, key, rawValue, meta) => {
            const value = parseFloat(rawValue)*10;
            const payloads = {
                temperature_offset: ['msTemperatureMeasurement', {0x0410: {value, type: 0x29}}],
            };
            await entity.write(payloads[key][0], payloads[key][1]);
            return {
                state: {[key]: rawValue},
            };
        },
    },
};

const fzLocal = {
    node_config: {
        cluster: 'genPowerCfg',
        type: ['attributeReport', 'readResponse'],
        convert: (model, msg, publish, options, meta) => {
            const result = {};
            if (msg.data.hasOwnProperty(0x0201)) {
                result.read_sensors_delay = msg.data[0x0201];
            }
            return result;
        },
    },
	node_debug: {
        cluster: 'msSoilMoisture',
        type: ['attributeReport', 'readResponse'],
        convert: (model, msg, publish, options, meta) => {
            const result = {};
			if (msg.data.hasOwnProperty(0x0502)) {
                result.lower_level = msg.data[0x0502];
            }
			if (msg.data.hasOwnProperty(0x0503)) {
                result.upper_level = msg.data[0x0503];
            }
            return result;
        },
    },
	temperaturef_config: {
        cluster: 'msTemperatureMeasurement',
        type: ['attributeReport', 'readResponse'],
        convert: (model, msg, publish, options, meta) => {
            const result = {};
            if (msg.data.hasOwnProperty(0x0410)) {
                result.temperature_offset = parseFloat(msg.data[0x0410])/10.0;
            }
            return result;
        },
    },
};

const definition = {
        zigbeeModel: ['zFlora_SE'],
        model: 'zFlora_SE',
        vendor: 'Custom devices (DiY)',
        description: '[Plant watering sensor zFlora Special Edition](http://efektalab.com/zFlora)',
        fromZigbee: [fz.temperature, fz.humidity, fz.soil_moisture, fz.battery, fzLocal.node_config, fzLocal.temperaturef_config, fzLocal.node_debug],
        toZigbee: [tz.factory_reset, tzLocal.node_config, tzLocal.temperaturef_config, tzLocal.node_debug],
        configure: async (device, coordinatorEndpoint, logger) => {
            const firstEndpoint = device.getEndpoint(1);
            await reporting.bind(firstEndpoint, coordinatorEndpoint, [
                'genPowerCfg', 'msTemperatureMeasurement', 'msRelativeHumidity', 'msSoilMoisture']);
			const overrides1 = {min: 1800, max: 21600, change: 1};
			const overrides2 = {min: 300, max: 3600, change: 25};
			const overrides3 = {min: 600, max: 3600, change: 50};
			const overrides5 = {min: 600, max: 3600, change: 100};
            await reporting.batteryVoltage(firstEndpoint, overrides1);
            await reporting.batteryPercentageRemaining(firstEndpoint, overrides1);
			await reporting.batteryAlarmState(firstEndpoint, overrides1);
            await reporting.temperature(firstEndpoint, overrides2);
            await reporting.humidity(firstEndpoint, overrides3);
            await reporting.soil_moisture(firstEndpoint, overrides5);
        },
		icon: 'data:image/jpeg;base64,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AAAAVG9wIFVudEYjUmx0AAAAAAAAAAAAAAAAU2NsIFVudEYjUHJjQFkAAAAAAAAAAAAQY3JvcFdoZW5QcmludGluZ2Jvb2wAAAAADmNyb3BSZWN0Qm90dG9tbG9uZwAAAAAAAAAMY3JvcFJlY3RMZWZ0bG9uZwAAAAAAAAANY3JvcFJlY3RSaWdodGxvbmcAAAAAAAAAC2Nyb3BSZWN0VG9wbG9uZwAAAAAAOEJJTQPtAAAAAAAQAEf75wABAAEAR/vnAAEAAThCSU0EJgAAAAAADgAAAAAAAAAAAAA/gAAAOEJJTQQNAAAAAAAEAAAAWjhCSU0EGQAAAAAABAAAAB44QklNA/MAAAAAAAkAAAAAAAAAAAEAOEJJTScQAAAAAAAKAAEAAAAAAAAAAThCSU0D9QAAAAAASAAvZmYAAQBsZmYABgAAAAAAAQAvZmYAAQChmZoABgAAAAAAAQAyAAAAAQBaAAAABgAAAAAAAQA1AAAAAQAtAAAABgAAAAAAAThCSU0D+AAAAAAAcAAA/////////////////////////////wPoAAAAAP////////////////////////////8D6AAAAAD/////////////////////////////A+gAAAAA/////////////////////////////wPoAAA4QklNBAAAAAAAAAIAAThCSU0EAgAAAAAABAAAAAA4QklNBDAAAAAAAAIBAThCSU0ELQAAAAAABgABAAAAAjhCSU0ECAAAAAAAEAAAAAEAAAJAAAACQAAAAAA4QklNBB4AAAAAAAQAAAAAOEJJTQQaAAAAAANLAAAABgAAAAAAAAAAAAAAfQAAAH0AAAALBBEENQQ3ACAEOAQ8BDUEPQQ4AC0AMgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAfQAAAH0AAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAG51bGwAAAACAAAABmJvdW5kc09iamMAAAABAAAAAAAAUmN0MQAAAAQAAAAAVG9wIGxvbmcAAAAAAAAAAExlZnRsb25nAAAAAAAAAABCdG9tbG9uZwAAAH0AAAAAUmdodGxvbmcAAAB9AAAABnNsaWNlc1ZsTHMAAAABT2JqYwAAAAEAAAAAAAVzbGlj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b3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bWxuczpkYz0iaHR0cDovL3B1cmwub3JnL2RjL2VsZW1lbnRzLzEuMS8iIHhtbG5zOnBob3Rvc2hvcD0iaHR0cDovL25zLmFkb2JlLmNvbS9waG90b3Nob3AvMS4wLyIgeG1wOkNyZWF0b3JUb29sPSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDI0LTAxLTIwVDE0OjA3OjI0KzAzOjAwIiB4bXA6TWV0YWRhdGFEYXRlPSIyMDI0LTAxLTIwVDE0OjA3OjI0KzAzOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyNC0wMS0yMFQxNDowNzoyNCswMzowMCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDo2ODVmYTVjZC1iODNiLTJkNDUtOTgwYS1lZDFlNzVjYWI2YWIiIHhtcE1NOkRvY3VtZW50SUQ9ImFkb2JlOmRvY2lkOnBob3Rvc2hvcDo2YjczMjlhYy0zMjIxLTU3NGItODcxOC0xNGViYjE3YjFhOWMiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0ieG1wLmRpZDoxMWFhOTA1ZS1kNDE1LTc5NDUtOWRhZS1kOTE5NDNkMWJhZWIiIGRjOmZvcm1hdD0iaW1hZ2UvanBlZyIgcGhvdG9zaG9wOkNvbG9yTW9kZT0iMyI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6MTFhYTkwNWUtZDQxNS03OTQ1LTlkYWUtZDkxOTQzZDFiYWViIiBzdEV2dDp3aGVuPSIyMDI0LTAxLTIwVDE0OjA3OjI0KzAzOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgMjAxOCAoV2luZG93cykiLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjY4NWZhNWNkLWI4M2ItMmQ0NS05ODBhLWVkMWU3NWNhYjZhYiIgc3RFdnQ6d2hlbj0iMjAyNC0wMS0yMFQxNDowNzoyNCswMzowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIENDIDIwMTggKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICA8P3hwYWNrZXQgZW5kPSJ3Ij8+/+4AIUFkb2JlAGQAAAAAAQMAEAMCAwYAAAAAAAAAAAAAAAD/2wCEAAYEBAQFBAYFBQYJBgUGCQsIBgYICwwKCgsKCgwQDAwMDAwMEAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwBBwcHDQwNGBAQGBQODg4UFA4ODg4UEQwMDAwMEREMDAwMDAwRDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDP/CABEIAH0AfQMBEQACEQEDEQH/xACfAAACAgMBAQAAAAAAAAAAAAAAAQIEAwUIBwYBAQEBAQEAAAAAAAAAAAAAAAABAgMEEAABAwIFBAICAwEAAAAAAAABABECAwQQMBIFBiAhMQdAEyIUQSMVFxEA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',
        exposes: [e.soil_moisture(), e.battery(), e.battery_low(), e.battery_voltage(), e.temperature(), e.humidity(),
		    exposes.numeric('read_sensors_delay', ea.STATE_SET).withUnit('Minutes').withDescription('Adjust Report Delay. Setting the time in minutes, by default 15 minutes')
                .withValueMin(1).withValueMax(360),
			exposes.numeric('lower_level', ea.STATE_SET).withUnit('%').withDescription('The lower level of soil moisture 0% is:')
                .withValueMin(0).withValueMax(99),
			exposes.numeric('upper_level', ea.STATE_SET).withUnit('%').withDescription('The upper level of soil moisture 100% is:')
                .withValueMin(1).withValueMax(100),
		    exposes.numeric('temperature_offset', ea.STATE_SET).withUnit('°C').withValueStep(0.1).withDescription('Adjust temperature')
                .withValueMin(-50.0).withValueMax(50.0)],
};

module.exports = definition;